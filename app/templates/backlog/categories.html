{% extends "base.html" %}
{% block title %}Categories — Game Journal{% endblock %}

{% block content %}
<div class="max-w-md">
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-bold">Categories</h1>
    <a href="{{ url_for('backlog.index') }}"
       class="text-sm text-gray-400 hover:text-white transition-colors">← Backlog</a>
  </div>

  <!-- Add category -->
  <form method="post" class="flex gap-2 mb-8">
    <input name="name" type="text" required placeholder="New category name…"
           class="flex-1 bg-gray-800 border border-gray-700 rounded px-3 py-2 text-sm focus:outline-none focus:border-indigo-500">
    <button type="submit"
            class="px-4 py-2 bg-indigo-700 hover:bg-indigo-600 rounded text-sm transition-colors">
      Add
    </button>
  </form>

  <!-- Existing categories -->
  {% if categories %}
  <ul class="flex flex-col gap-2">
    {% for cat in categories %}
    <li class="flex items-center justify-between bg-gray-900 rounded-lg px-4 py-3">
      <div>
        <span class="font-medium">{{ cat.name }}</span>
        <span class="ml-2 text-xs text-gray-500">{{ cat.games | length }} game{{ 's' if cat.games | length != 1 }}</span>
      </div>
      <form method="post" action="{{ url_for('backlog.delete_category', cat_id=cat.id) }}"
            onsubmit="return confirm('Delete category \'{{ cat.name }}\'? Its games will become uncategorized.')">
        <button type="submit"
                class="text-xs px-2.5 py-1 rounded bg-gray-700 hover:bg-red-900 text-gray-400 hover:text-red-300 transition-colors">
          Delete
        </button>
      </form>
    </li>
    {% endfor %}
  </ul>
  {% else %}
  <p class="text-gray-500 text-sm">No categories yet.</p>
  {% endif %}
</div>
{% endblock %}
